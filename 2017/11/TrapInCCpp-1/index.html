<!DOCTYPE html><html><head hexo-theme="https://volantis.js.org/#2.6.5"><meta charset="utf-8"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>C/C++的一些常见的坑(1) - miRoox的博客</title><meta name="keywords" content="参考,编程,C语言,C++,语法,踩坑"><meta name="description" content="根据个人经验和见闻总结而来。主要涉及C和C++语法和语义方面的一些陷阱。"><link rel="alternate" href="/blog/atom.xml" title="miRoox的博客"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css"><link rel="shortcut icon" type="image/x-icon" href="/blog/images/favicon.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"><link rel="stylesheet" href="/blog/css/style.css"><script>function setLoadingBarProgress(e){document.getElementById("loading-bar").style.width=e+"%"}</script></head><body><div id="loading-bar-wrapper"><div id="loading-bar"></div></div><header class="l_header shadow blur"><div class="container"><div class="wrapper"><div class="nav-sub"><p class="title"></p><ul class="switcher nav-list-h"><li><a class="s-comment fas fa-comments fa-fw" target="_self" href="javascript:void(0)"></a></li><li><a class="s-toc fas fa-list fa-fw" target="_self" href="javascript:void(0)"></a></li></ul></div><div class="nav-main"><a class="title flat-box" target="_self" href="/blog/">miRoox' Blog</a><div class="menu navigation"><ul class="nav-list-h"><li><a class="flat-box" href="/blog/" id="blog"><i class="fas fa-clock fa-fw"></i>最近</a></li><li><a class="flat-box" href="/blog/archives/" rel="nofollow" id="blogarchives"><i class="fas fa-archive fa-fw"></i>归档</a></li><li><a class="flat-box"><i class="fas fa-folder-open fa-fw"></i>分类</a><ul class="list-v"><li><a class="flat-box" href="/blog/categories/%E4%BB%A3%E7%A0%81%E7%BC%96%E7%A8%8B" id="blogcategoriesE4BBA3E7A081E7BC96E7A88B">代码编程</a></li><li><a class="flat-box" href="/blog/categories/%E6%95%B0%E7%90%86%E7%A7%91%E5%AD%A6" id="blogcategoriesE695B0E79086E7A791E5ADA6">数理科学</a></li><li><a class="flat-box" href="/blog/categories/%E5%B0%8F%E8%AF%B4%E6%96%87%E8%89%BA" id="blogcategoriesE5B08FE8AFB4E69687E889BA">小说文艺</a></li><li><a class="flat-box" href="/blog/categories/%E6%9D%82%E8%B0%88%E6%95%A3%E8%AE%B0" id="blogcategoriesE69D82E8B088E695A3E8AEB0">杂谈散记</a></li><li><a class="flat-box" href="/blog/categories/%E7%BF%BB%E8%AF%91%E4%BD%9C%E5%93%81" id="blogcategoriesE7BFBBE8AF91E4BD9CE59381">翻译作品</a></li></ul></li><li><a class="flat-box" href="/blog/tags/" rel="nofollow" id="blogtags"><i class="fas fa-tags fa-fw"></i>标签</a></li><li><a class="flat-box" href="/blog/friends/" rel="nofollow" id="blogfriends"><i class="fas fa-user-friends fa-fw"></i>友链</a></li><li><a class="flat-box" href="https://miroox.github.io/wiki/" rel="nofollow" id="https:mirooxgithubiowiki"><i class="fab fa-wikipedia-w fa-fw"></i>知识库</a></li></ul></div><div class="m_search"><form name="searchform" class="form u-search-form"><i class="icon fas fa-search fa-fw"></i> <input type="text" class="input u-search-input" placeholder="搜索……"></form></div><ul class="switcher nav-list-h"><li><a class="s-search fas fa-search fa-fw" target="_self" href="javascript:void(0)"></a></li><li><a class="s-menu fas fa-bars fa-fw" target="_self" href="javascript:void(0)"></a><ul class="menu-phone list-v navigation white-box"><li><a class="flat-box" href="/blog/" id="blog"><i class="fas fa-clock fa-fw"></i>最近</a></li><li><a class="flat-box" href="/blog/archives/" rel="nofollow" id="blogarchives"><i class="fas fa-archive fa-fw"></i>归档</a></li><li><a class="flat-box"><i class="fas fa-folder-open fa-fw"></i>分类</a><ul class="list-v"><li><a class="flat-box" href="/blog/categories/%E4%BB%A3%E7%A0%81%E7%BC%96%E7%A8%8B" id="blogcategoriesE4BBA3E7A081E7BC96E7A88B">代码编程</a></li><li><a class="flat-box" href="/blog/categories/%E6%95%B0%E7%90%86%E7%A7%91%E5%AD%A6" id="blogcategoriesE695B0E79086E7A791E5ADA6">数理科学</a></li><li><a class="flat-box" href="/blog/categories/%E5%B0%8F%E8%AF%B4%E6%96%87%E8%89%BA" id="blogcategoriesE5B08FE8AFB4E69687E889BA">小说文艺</a></li><li><a class="flat-box" href="/blog/categories/%E6%9D%82%E8%B0%88%E6%95%A3%E8%AE%B0" id="blogcategoriesE69D82E8B088E695A3E8AEB0">杂谈散记</a></li><li><a class="flat-box" href="/blog/categories/%E7%BF%BB%E8%AF%91%E4%BD%9C%E5%93%81" id="blogcategoriesE7BFBBE8AF91E4BD9CE59381">翻译作品</a></li></ul></li><li><a class="flat-box" href="/blog/tags/" rel="nofollow" id="blogtags"><i class="fas fa-tags fa-fw"></i>标签</a></li><li><a class="flat-box" href="/blog/friends/" rel="nofollow" id="blogfriends"><i class="fas fa-user-friends fa-fw"></i>友链</a></li><li><a class="flat-box" href="https://miroox.github.io/wiki/" rel="nofollow" id="https:mirooxgithubiowiki"><i class="fab fa-wikipedia-w fa-fw"></i>知识库</a></li></ul></li></ul></div></div></div></header><script>setLoadingBarProgress(40)</script><div class="l_body nocover"><div class="body-wrapper"><div class="l_main"><article id="post" class="post white-box reveal shadow article-type-post" itemscope itemprop="blogPost"><section class="meta"><div class="meta" id="header-meta"><h1 class="title"><a href="/blog/2017/11/TrapInCCpp-1/">C/C++的一些常见的坑(1)</a></h1><div class="new-meta-box"><div class="new-meta-item author"><a href="https://miroox.github.io/" rel="nofollow"><img src="/blog/images/avatar.jpg"><p>miRoox</p></a></div><div class="new-meta-item category"><a href="/blog/categories/%E4%BB%A3%E7%A0%81%E7%BC%96%E7%A8%8B/" rel="nofollow"><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i><p>代码编程</p></a></div><div class="new-meta-item date"><a class="notlink"><i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i><p>发布于：2017年11月18日</p></a></div><div class="new-meta-item wordcount"><a class="notlink"><i class="fas fa-keyboard fa-fw" aria-hidden="true"></i><p>字数：1.7k字</p></a></div><div class="new-meta-item readtime"><a class="notlink"><i class="fas fa-hourglass-half fa-fw" aria-hidden="true"></i><p>时长：6分钟</p></a></div></div><hr></div></section><section class="article typo"><div class="article-entry" itemprop="articleBody"><p>根据个人经验和见闻总结而来。主要涉及C和C++语法和语义方面的一些陷阱。</p><a id="more"></a><h3 id="求值顺序"><a class="markdownIt-Anchor" href="#求值顺序"></a> 求值顺序</h3><p>在著名的《谭C》教材的误导下，中国学生对表达式的求值顺序的误解可能是最深的。首先要明确地是，<strong>运算符对运算数的求值顺序与运算符的结合性没有任何关系</strong>，而且，无论是C语言还是C++，<strong>几乎所有</strong>运算符对运算数进行求值的顺序都是 <em>未指定的</em>，甚至在某些情况下会构成 <em>未定义行为</em>。</p><p>另一方面，C和C++在这方面的规定较为复杂，而且随着标准版本的变化，相关概念也有较大的变化。因此，除非你自认为自己对这方面的规定十分清楚，我建议尽量让程序里的每一个表达式保持结构简单，尤其避免在一个表达式对同一个对象里产生超过一次 <em>副作用</em>。这不光可以避免未定义行为或者未指定行为，也有助于增强程序的可读性。例如：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//bad</span></span><br><span class="line"></span><br><span class="line">i = ++i + i++;     <span class="comment">// C 和 C++ 中都为未定义的行为</span></span><br><span class="line"></span><br><span class="line">i = ++i + <span class="number">1</span>;       <span class="comment">// C 中始终为未定义行为；C++11 前为未定义的行为</span></span><br><span class="line"></span><br><span class="line">f(i = <span class="number">-2</span>, i = <span class="number">-2</span>); <span class="comment">// C 中始终为未定义行为；C++17 前为未定义的行为</span></span><br><span class="line"></span><br><span class="line">a[i] = i++;        <span class="comment">// C 中始终为未定义行为；C++17 前为未定义的行为</span></span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//good</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//i = ++i + i++;   // what does the coder want to do?</span></span><br><span class="line"></span><br><span class="line">i = i + <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">i = <span class="number">-2</span>;</span><br><span class="line">f(i, i);</span><br><span class="line"></span><br><span class="line">++i;</span><br><span class="line">a[i] = i;</span><br></pre></td></tr></table></figure><p>参见 <a href="http://zh.cppreference.com/w/c/language/eval_order" target="_blank" rel="noopener">C：求值顺序</a>、<a href="http://zh.cppreference.com/w/cpp/language/eval_order" target="_blank" rel="noopener">C++：求值顺序</a></p><h3 id="字符常量字面量的类型"><a class="markdownIt-Anchor" href="#字符常量字面量的类型"></a> 字符常量/字面量的类型</h3><p>简而言之，C语言中无前缀修饰的 <em>字符常量</em> 的类型是 <code>int</code> ；而C++中无前缀修饰的 <em>字符字面量</em> 的类型默认是 <code>char</code> （除非字符在执行字符集中无法用单字节表示，这时其类型为 <code>int</code> ）。</p><p>是的，在 C 和 C++ 里他们的叫法都不同。C 把嵌入代码的常量值称为 <em>常量</em> 或 <em>字面量</em> ，其中 <em>常量</em> 是 <em>右值</em>表达式， <em>字面量</em> 是 <em>左值</em>表达式 ；而 C++ 中统称为 <em>字面量</em> 。</p><p>其它编码的字符常量/字面量的具体内容参见下面的链接。</p><p>参见：<br><a href="http://zh.cppreference.com/w/c/language/character_constant" target="_blank" rel="noopener">C：字符常量</a>、<a href="http://zh.cppreference.com/w/cpp/language/character_literal" target="_blank" rel="noopener">C++：字符字面量</a></p><h3 id="数组指代器不是指针常量"><a class="markdownIt-Anchor" href="#数组指代器不是指针常量"></a> 数组指代器不是指针常量</h3><p>同样是受《谭C》等一批国内教科书的毒害，有不少人认为数组就是指针常量。但实际上数组的类型就是数组类型，只是使用时大多数情况下会隐式转换成其首元素指针的 <em>非左值</em> 。正因为这种转换的存在，所以我们才能像指针一般使用数组，又因为其结果是非左值，所以不可以被赋值。</p><p>但另一方面，在C语言中，函数参数列表中的数组声明，在对应的函数调用时其实际参数的值是一个指针。（可以说是C的一个黑点了）</p><p>详细的转换规则见下面的链接。</p><p>参见：<br><a href="http://zh.cppreference.com/w/c/language/conversion#.E6.95.B0.E7.BB.84.E5.88.B0.E6.8C.87.E9.92.88.E8.BD.AC.E6.8D.A2" target="_blank" rel="noopener">C：数组到指针转换</a>、<a href="http://zh.cppreference.com/w/cpp/language/implicit_conversion#.E6.95.B0.E7.BB.84.E5.88.B0.E6.8C.87.E9.92.88.E8.BD.AC.E6.8D.A2" target="_blank" rel="noopener">C++：数组到指针转换</a></p><h3 id="static-储存类指定符"><a class="markdownIt-Anchor" href="#static-储存类指定符"></a> <code>static</code> 储存类指定符</h3><p>之所以写这一条，是因为听说有驱动程序把以 <code>static</code> 修饰的对象定义在头文件里导致内存爆炸的传闻。这么看 <code>static</code> 确实有一些坑，无论是C语言还是C++，作为储存类指定符的 <code>static</code> 都具有多重语义，而且在不同情况下含义不尽相同。</p><p>简洁起见，这里不考虑与 <code>thread_local</code>（或者 <code>_Thread_local</code> ）组合的情况；标识符（C）和名称（C++）统称为名称。</p><p>首先要明确的是，储存类指定符都包含两层内涵，一是指定 <strong>对象</strong> 的 <em>储存期</em> ，一是指定 <strong>名称</strong> 的 <em>链接</em> 。这是两个层次的内涵，也是很多初学者比较模糊的。</p><p>一方面，被 <code>static</code> 修饰的对象拥有 <em>静态储存期</em> ，该对象生存期基本和整个程序一样长；另一方面，被 <code>static</code> 修饰的名称通常为 <em>内部链接</em> ，即该名称的只在当前的翻译单元可被引用；除非被 <code>static</code> 修饰的是一个局部变量，那么它（的名称）的链接为 <em>无链接</em> ，即该名称只能在它所在的作用域中被引用。</p><p>可以看出，<code>static</code> 确实可以让我们在头文件里定义函数或者对象而不引发重定义错误，因为包含一个头文件就是把整个头文件复制到源文件里，那么在每一个包含该头文件的源文件里都有一个被 <code>static</code> 修饰的对象/函数，它们虽然具有同样的名称，但由于所用是内部链接，所以它们指代的是（各自翻译单元的）不同实体，因而在内存受限的设备上大量包含这样的头文件就有可能导致内存爆炸。</p><p>还要注意的一点是，对于C，无论是全局还是块作用域中的静态对象，其初始化器必须为常量表达式，且初始化发生于主函数前。而对于C++，静态局部变量的可以不用常量表达式初始化，而且可能等到控制流首次经过其声明时才初始化。</p><p>（注1：对于C++，类中的 <code>static</code> 声明代表不绑定到类实例的 <a href="http://zh.cppreference.com/w/cpp/language/static" target="_blank" rel="noopener">静态成员</a> ）</p><p>（注2：C99后 <code>static</code> 还可能用于函数声明中的 <a href="http://zh.cppreference.com/w/c/language/array" target="_blank" rel="noopener">静态数组下标</a> ）</p><p>参考：<br><a href="http://zh.cppreference.com/w/c/language/storage_duration" target="_blank" rel="noopener">C：存储类指定符</a>、<a href="http://zh.cppreference.com/w/cpp/language/storage_duration" target="_blank" rel="noopener">C++：存储类指定符</a>、<a href="http://zh.cppreference.com/w/c/language/constant_expression#.E9.9D.99.E6.80.81.E5.88.9D.E5.A7.8B.E5.8C.96.E5.99.A8" target="_blank" rel="noopener">C：静态初始化器</a>、<a href="http://zh.cppreference.com/w/cpp/language/initialization#.E9.9D.99.E6.80.81.E5.88.9D.E5.A7.8B.E5.8C.96" target="_blank" rel="noopener">C++：静态初始化</a>、<a href="http://zh.cppreference.com/w/cpp/language/storage_duration#.E9.9D.99.E6.80.81.E5.B1.80.E9.83.A8.E5.8F.98.E9.87.8F" target="_blank" rel="noopener">C++：静态局部变量</a></p><h3 id="某些整数运算的坑"><a class="markdownIt-Anchor" href="#某些整数运算的坑"></a> 某些整数运算的坑</h3><p>懒得写了，见 @孙明琦 的 <a href="https://zhuanlan.zhihu.com/p/26675068" target="_blank" rel="noopener">整理一发C++整数运算的所有细节</a></p><h3 id="main-函数的原型"><a class="markdownIt-Anchor" href="#main-函数的原型"></a> <code>main</code> 函数的原型</h3><p>著名语言律师 @幻の上帝 对此 <a href="https://github.com/FrankHB/pl-docs/blob/master/zh-CN/main-function.md" target="_blank" rel="noopener">早有论述</a>。这里只摘录一下主要结论：</p><blockquote><p><code>void main()</code> 在 C 仍然可以是符合标准(conforming)的扩展；<br>在 C++ 中不返回 <code>int</code> 的 <code>main</code> 直接不符合标准。</p></blockquote><p>参见 <a href="http://zh.cppreference.com/w/c/language/main_function" target="_blank" rel="noopener">C：主函数</a>、<a href="http://zh.cppreference.com/w/cpp/language/main_function" target="_blank" rel="noopener">C++：主函数</a></p><h3 id="volatile-类型限定符"><a class="markdownIt-Anchor" href="#volatile-类型限定符"></a> <code>volatile</code> 类型限定符</h3><p><code>volatile</code> 大概是被误解最多的 C/C++ 语言特性之一。</p><p>简而言之，<code>volatile</code> 只是代表 <em><strong>读副作用</strong></em> ，与什么 <em>多线程</em>、 <em>原子性</em> 以及 <em>memory barrier</em> 都没什么关系（尽管 <a href="https://docs.microsoft.com/zh-cn/cpp/cpp/volatile-cpp" target="_blank" rel="noopener">MSVC</a> 提供了额外的语义使之可以用于多线程编程，但这种特性不可移植，不推荐使用）。而 <code>volatile</code> 本来的意图主要是用于模拟映射于内存的硬件I/O，以及信号处理函数。</p><p>（注：<a href="https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html" target="_blank" rel="noopener">Java</a> 里的 <code>volatile</code> 具有原子访问的语义。）</p><p>参见 <a href="http://zh.cppreference.com/w/c/language/volatile" target="_blank" rel="noopener">C：volatile 类型限定符</a>、<a href="http://zh.cppreference.com/w/cpp/language/cv" target="_blank" rel="noopener">C++：cv 类型限定符</a>、<a href="https://docs.microsoft.com/zh-cn/cpp/cpp/volatile-cpp" target="_blank" rel="noopener">MSDN：volatile</a>、<a href="http://zh.cppreference.com/w/c/program/signal#.E4.BF.A1.E5.8F.B7.E5.A4.84.E7.90.86.E5.87.BD.E6.95.B0" target="_blank" rel="noopener">C：信号处理函数</a>、<a href="http://zh.cppreference.com/w/cpp/language/as_if" target="_blank" rel="noopener">C++：如同规则</a></p><hr><p>应该会有下一篇的，大概。</p><div class="article_footer"><section class="widget copyright desktop mobile"><div class="content"><blockquote><p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p><p>本文永久链接是：<a href="http://miroox.github.io/blog/2017/11/TrapInCCpp-1/">http://miroox.github.io/blog/2017/11/TrapInCCpp-1/</a></p></blockquote></div></section></div></div><section class="meta" id="footer-meta"><div class="new-meta-box"><div class="new-meta-item date" itemprop="dateUpdated" datetime="2020-01-29T10:40:06+00:00"><a class="notlink"><i class="fas fa-edit fa-fw" aria-hidden="true"></i><p>更新于：2020年1月29日</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/blog/tags/%E5%8F%82%E8%80%83/" rel="nofollow"><i class="fas fa-tags fa-fw" aria-hidden="true"></i><p>参考</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/blog/tags/%E7%BC%96%E7%A8%8B/" rel="nofollow"><i class="fas fa-tags fa-fw" aria-hidden="true"></i><p>编程</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/blog/tags/C%E8%AF%AD%E8%A8%80/" rel="nofollow"><i class="fas fa-tags fa-fw" aria-hidden="true"></i><p>C语言</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/blog/tags/C/" rel="nofollow"><i class="fas fa-tags fa-fw" aria-hidden="true"></i><p>C++</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/blog/tags/%E8%AF%AD%E6%B3%95/" rel="nofollow"><i class="fas fa-tags fa-fw" aria-hidden="true"></i><p>语法</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/blog/tags/%E8%B8%A9%E5%9D%91/" rel="nofollow"><i class="fas fa-tags fa-fw" aria-hidden="true"></i><p>踩坑</p></a></div><div class="new-meta-item share -mob-share-list"><div class="-mob-share-list share-body"><a class="-mob-share-qq" rel="external nofollow noopener noreferrer noopener" href="http://connect.qq.com/widget/shareqq/index.html?url=http://miroox.github.io/blog/2017/11/TrapInCCpp-1/&title=C/C++的一些常见的坑(1) - miRoox的博客&summary=根据个人经验和见闻总结而来。主要涉及C和C++语法和语义方面的一些陷阱。" target="_blank"><img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qq.png"> </a><a class="-mob-share-qzone" rel="external nofollow noopener noreferrer noopener" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://miroox.github.io/blog/2017/11/TrapInCCpp-1/&title=C/C++的一些常见的坑(1) - miRoox的博客&summary=根据个人经验和见闻总结而来。主要涉及C和C++语法和语义方面的一些陷阱。" target="_blank"><img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qzone.png"> </a><a class="-mob-share-weibo" rel="external nofollow noopener noreferrer noopener" href="http://service.weibo.com/share/share.php?url=http://miroox.github.io/blog/2017/11/TrapInCCpp-1/&title=C/C++的一些常见的坑(1) - miRoox的博客&summary=根据个人经验和见闻总结而来。主要涉及C和C++语法和语义方面的一些陷阱。" target="_blank"><img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/weibo.png"></a></div></div></div></section><div class="prev-next"><a class="prev" href="/blog/2018/05/2018-5-19-RemoveGitHubFork/"><p class="title"><i class="fas fa-chevron-left" aria-hidden="true"></i>解除GitHub仓库的Fork连接</p><p class="content">这是一篇灌水文。GitHub的Fork功能实际上主要是服务于Pull Request，然而我以前并没有正确地认识到这一点，简单地把Fork当clone使，导致有些时候不太方便。比如生成这个博客的...</p></a><a class="next" href="/blog/2017/10/ImageEncryptImprovedChirikovMap/"><p class="title">基于改进的Chirikov映射的彩色图像加密算法<i class="fas fa-chevron-right" aria-hidden="true"></i></p><p class="content">项目见 GitHub摘要：基于改进的Chirikov映射来实现一种彩色图像加密的算法。该方法通过在Chirikov映射中增加一个参数来增加算法的随机性。采用像素数据置乱的方法实现图像加密。并进行...</p></a></div></section></article><article class="post white-box reveal comments shadow"><section class="article typo"><p ct><i class="fas fa-comments"></i> 评论</p><section id="comments"><div id="gitalk-container"></div></section><section id="comments"><div id="valine_container" class="valine_thread"><i class="fas fa-cog fa-spin fa-fw fa-2x"></i></div></section></section></article><script>window.subData={title:"C/C++的一些常见的坑(1)",tools:!0}</script></div><aside class="l_side"><section class="widget text shadow desktop mobile"><header><i class="fas fa-bell fa-fw" aria-hidden="true"></i><span class="name">布告板</span></header><div class="content"><p>博客迁移中……</p></div></section><section class="widget toc-wrapper shadow desktop mobile"><header><i class="fas fa-list fa-fw" aria-hidden="true"></i><span class="name">本文目录</span></header><div class="content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#求值顺序"><span class="toc-text">求值顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符常量字面量的类型"><span class="toc-text">字符常量&#x2F;字面量的类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数组指代器不是指针常量"><span class="toc-text">数组指代器不是指针常量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#static-储存类指定符"><span class="toc-text">static 储存类指定符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#某些整数运算的坑"><span class="toc-text">某些整数运算的坑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#main-函数的原型"><span class="toc-text">main 函数的原型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#volatile-类型限定符"><span class="toc-text">volatile 类型限定符</span></a></li></ol></div></section></aside><footer class="clearfix"><br><br><div class="aplayer-container"><meting-js theme="#1BCDFC" autoplay volume="0.7" loop order="random" fixed="false" list-max-height="340px" server="netease" type="playlist" id="592343641" list-folded="true"></meting-js></div><br><div class="social-wrapper"><a href="/blog/atom.xml" class="social fas fa-rss flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="mailto:miroox@outlook.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://weibo.com/MiFantasy000" class="social fab fa-weibo flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://twitter.com/miroox6" class="social fab fa-twitter flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://www.zhihu.com/people/lu-yong-8-79" class="social fab fa-zhihu flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://github.com/miRoox" class="social fab fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://music.163.com/#/user/home?id=415505414" class="social fas fa-headphones-alt flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a></div><div><p>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p></div><div class="copyright"><p><a href="https://miroox.github.io/">Copyright © 2017-2020 miRoox</a> Powered by the <a href="https://volantis.js.org/" target="_blank" rel="noopener">Volantis theme</a> for <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a></p></div></footer><script>setLoadingBarProgress(80)</script><script>setLoadingBarProgress(60)</script></div><a class="s-top fas fa-arrow-up fa-fw" href="javascript:void(0)"></a></div><script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js"></script><script>var SEARCH_SERVICE="hexo",ROOT="/blog/";ROOT.endsWith("/")||(ROOT+="/")</script><script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.6/dist/scrollreveal.min.js"></script><script type="text/javascript">$(function(){ScrollReveal().reveal(".l_main .reveal",{distance:"8px",duration:"800",interval:"100",scale:"1"})})</script><script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script><script type="text/javascript">$(function(){Waves.attach(".flat-btn",["waves-button"]),Waves.attach(".float-btn",["waves-button","waves-float"]),Waves.attach(".float-btn-light",["waves-button","waves-float","waves-light"]),Waves.attach(".flat-box",["waves-block"]),Waves.attach(".float-box",["waves-block","waves-float"]),Waves.attach(".waves-image"),Waves.init()})</script><script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script><script type="text/javascript">$(function(){var a=["images/bg1.jpg","images/bg2.jpg"];!function(a){for(var r=a.length;r--;){var o=Math.floor(Math.random()*r),t=a[o];a[o]=a[r],a[r]=t}}(a),$(".cover").backstretch(a,{duration:"20000",fade:"1500"})})</script><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><script type="text/javascript">var gitalk=new Gitalk({clientID:"72d968977988a0f2857a",clientSecret:"545b7fd3220ded515ef4b37df88eacb7a0d25387",repo:"blog",owner:"miRoox",admin:"miRoox",id:location.pathname,distractionFreeMode:!1});gitalk.render("gitalk-container")</script><script src="https://cdn.jsdelivr.net/npm/valine@1.4/dist/Valine.min.js"></script><script>var GUEST_INFO=["nick","mail","link"],meta="nick,mail,link".split(",").filter(function(i){return-1<GUEST_INFO.indexOf(i)}),REQUIRED_FIELDS=["nick","mail","link"],requiredFields="nick,mail".split(",").filter(function(i){return-1<REQUIRED_FIELDS.indexOf(i)}),valine=new Valine;function emoji(i,e,a){return i+"/"+i+"-"+e+"."+a}for(var emojiMaps={},i=1;i<=54;i++)emojiMaps["tieba-"+i]=emoji("tieba",i,"png");for(i=1;i<=101;i++)emojiMaps["qq-"+i]=emoji("qq",i,"gif");for(i=1;i<=116;i++)emojiMaps["aru-"+i]=emoji("aru",i,"gif");for(i=1;i<=125;i++)emojiMaps["twemoji-"+i]=emoji("twemoji",i,"png");for(i=1;i<=4;i++)emojiMaps["weibo-"+i]=emoji("weibo",i,"png");valine.init({el:"#valine_container",meta:meta,appId:"dogUA2FSKGTo029M1SEwGROT-MdYXbMMI",appKey:"u0NdtQ8nvHoMdJPSYqm1LRxE",placeholder:"快来评论吧~",pageSize:"10",avatar:"robohash",lang:"zh-cn",visitor:"true",highlight:"true",mathJax:"false",enableQQ:"true",requiredFields:requiredFields,emojiCDN:"https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/emoji/valine/",emojiMaps:emojiMaps})</script><script src="/blog/js/app.js"></script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.6.4/js/search.js"></script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/comment_typing.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script><script>function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-check-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-check-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-times-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-times-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);</script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script>let LAZY_LOAD_IMAGE = "";
  $(".article-entry").find("div.fancybox").find("img").each(function () {
      var element = document.createElement("a");
      $(element).attr("data-fancybox", "gallery");
      $(element).attr("href", $(this).attr("src"));
      /* 图片采用懒加载处理时,
       * 一般图片标签内会有个属性名来存放图片的真实地址，比如 data-original,
       * 那么此处将原本的属性名src替换为对应属性名data-original,
       * 修改如下
       */
       if (LAZY_LOAD_IMAGE) {
         $(element).attr("href", $(this).attr("data-original"));
       }
      $(this).wrap(element);
  });</script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body)"></script><script type="text/javascript" color="27,195,251" opacity="0.7" zindex="-1" count="50" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script><script>setLoadingBarProgress(100)</script></body></html>